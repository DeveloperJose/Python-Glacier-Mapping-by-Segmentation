# Training configuration
training_opts:
  dataset_name: "bibek_w512_o64_f1_v2_phys64_s075"
  run_name: "dci_phys64_s075"
  epochs: 500
  fine_tune: False
  find_lr: False
  early_stopping: 100 # Epochs to wait for improvement
  # Slice visualizations (validation batch samples, every N epochs)
  num_slice_viz: 12 # 1+ to generate, 0 or less to skip
  slice_viz_every_n_epochs: 10
  # Full-tile evaluation (on best model only)
  run_full_eval: true # Run full-tile test set evaluation
  num_full_viz: 12 # 1+ to generate PNGs, 0 or less for metrics only

loader_opts:
  batch_size: 32 # 8 (original paper), 12 (debian 512x512) or 46-48 (debian 256x256)
  use_channels:
    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
  # [0="B1", 1="B2", 2="B3", 3="B4", 4="B5", 5="B6_VCID1", 6="B6_VCID2", 7="B7"] - Landsat-7 TIFF
  # [8="elevation", 9="slope_deg"] - DEM derived
  # [10="NDVI", 11="NDWI", 12="NDSI", 13="H", 14="S", 15="V"] - Spectral indices + HSV
  # [16="flow_accumulation", 17="TPI", 18="roughness", 19="plan_curvature"] - Physics channels
  output_classes: [2] # 0=BG, 1=CI, 2=Debris
  normalize: "mean-std" # "min-max" or "mean-std"
  class_names: ["BG", "CleanIce", "Debris"]

metrics_opts:
  metrics: ["IoU", "precision", "recall"]
  threshold: [0.5, 0.5]

loss_opts:
  name: "custom"
  masked: False
  gaussian_blur_sigma: None
  label_smoothing: 0
  use_unified: False

model_opts:
  args:
    net_depth: 4
    dropout: 0.1
    spatial: True
    first_channel_output: 32

optim_opts:
  name: "AdamW"
  args:
    lr: 0.0003
    weight_decay: 5e-5

scheduler_opts:
  name: "OneCycleLR"
  args:
    max_lr: 0.001 # Peak LR (3.3x base lr)
    pct_start: 0.3 # 30% warmup, 70% annealing
    anneal_strategy: "cos"
