# Training configuration
training_opts:
  dataset_name: "bibek_w512_o64_f1_velocity"
  run_name: ""
  epochs: 500
  fine_tune: False
  find_lr: False
  early_stopping: 100 # Epochs to wait for improvement
  # Slice visualizations (validation batch samples, every N epochs)
  num_slice_viz: 12 # 1+ to generate, 0 or less to skip
  slice_viz_every_n_epochs: 10
  # Full-tile evaluation (on best model only)
  run_full_eval: true # Run full-tile test set evaluation
  num_full_viz: 12 # 1+ to generate PNGs, 0 or less for metrics only

loader_opts:
  batch_size: 16 # 8 (original paper), 12 (debian 512x512) or 46-48 (debian 256x256), 16 (frodo), 32 (bilbo)

  # Semantic channel selection
  landsat_channels: true # [0-7] Landsat B1-B7
  dem_channels: true # [8-9] elevation, slope
  spectral_indices_channels: true # [10-12] NDVI, NDWI, NDSI
  hsv_channels: true # [13-15] H, S, V
  velocity_channels: true # [16-19] ITS_LIVE velocity, vx, vy, mask (mask auto-included if any selected)
  physics_channels: false # [20-23] flow_accumulation, tpi, roughness, curvature (not in standard datasets)

  # Fine-grained channel selection examples:
  # landsat_channels: [0, 1, 2]                    # Specific indices (B1, B2, B3)
  # landsat_channels: ["B1", "B2", "B3"]           # By name
  # spectral_indices_channels: ["NDVI", "NDSI"]    # Subset of indices
  # velocity_channels: [0, 1]                      # magnitude, vx → auto-adds mask → [16, 17, 19]
  # velocity_channels: false                       # Disable velocity entirely

  output_classes: [1] # 0=BG, 1=CI, 2=Debris
  normalize: "mean-std" # "min-max" or "mean-std"
  class_names: ["BG", "CleanIce", "Debris"]

metrics_opts:
  metrics: ["IoU", "precision", "recall"]
  threshold: [0.5, 0.5]

loss_opts:
  name: "custom"
  masked: False
  gaussian_blur_sigma: None
  label_smoothing: 0
  use_unified: False

model_opts:
  args:
    net_depth: 4
    dropout: 0.1
    spatial: True
    first_channel_output: 32

optim_opts:
  name: "AdamW"
  args:
    lr: 0.0003
    weight_decay: 5e-5

scheduler_opts:
  name: "OneCycleLR"
  args:
    max_lr: 0.001 # Peak LR (3.3x base lr)
    pct_start: 0.3 # 30% warmup, 70% annealing
    anneal_strategy: "cos"
